(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){},136:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(34),c=n.n(r),s=(n(104),n(105),n(22)),o=n(153),i=n(148),u=n(149),l=n(90),j=n(154),d=n(151),p=n(9),b=n(7),h=n.n(b),O=n(10),f=n(11),x=n.n(f),g="USER_LOGIN_REQUEST",v="USER_LOGIN_SUCCESS",m="USER_LOGIN_FAIL",y="USER_LOGOUT",S="USER_REGISTER_REQUEST",w="USER_REGISTER_SUCCESS",L="USER_REGISTER_FAIL",E="USER_DETAILS_REQUEST",I="USER_DETAILS_SUCCESS",C="USER_DETAILS_FAIL",_="USER_UPDATE_PROFILE_REQUEST",k="USER_UPDATE_PROFILE_SUCCESS",T="USER_UPDATE_PROFILE_FAIL",U="USER_DELETE_PROFILE_REQUEST",R="USER_DELETE_PROFILE_SUCCESS",A="USER_DELETE_PROFILE_FAIL",N="ADMIN_USER_LIST_REQUEST",D="ADMIN_USER_LIST_SUCCESS",B="ADMIN_USER_LIST_FAIL",P="ADMIN_USER_LIST_RESET",F="ADMIN_USER_DELETE_REQUEST",G="ADMIN_USER_DELETE_SUCCESS",M="ADMIN_USER_DELETE_FAIL",z=n(1),W=function(){var e=Object(p.b)(),t=Object(p.c)((function(e){return e.userLogin})).userInfo;return Object(z.jsx)("header",{children:Object(z.jsx)(o.a,{bg:"primary",variant:"dark",expand:"lg",children:Object(z.jsxs)(i.a,{children:[Object(z.jsxs)(u.a,{style:{display:"flex",alignItems:"center"},children:[Object(z.jsx)(l.a,{sm:5,children:Object(z.jsx)(s.LinkContainer,{to:"/",children:Object(z.jsx)(o.a.Brand,{children:"Polylingua"})})}),Object(z.jsxs)(l.a,{sm:5,children:[Object(z.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(z.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:t?Object(z.jsxs)(j.a,{className:"me-auto",children:[Object(z.jsx)(s.LinkContainer,{to:"/",children:Object(z.jsx)(j.a.Link,{children:"Friends"})}),Object(z.jsx)(s.LinkContainer,{to:"/messages",children:Object(z.jsx)(j.a.Link,{children:"Messages"})}),Object(z.jsx)(s.LinkContainer,{to:"/blogs/".concat(t.isLearning),children:Object(z.jsx)(j.a.Link,{children:"Blog"})})]}):Object(z.jsx)(z.Fragment,{})})]})]}),Object(z.jsx)(u.a,{children:Object(z.jsx)(l.a,{sm:2,children:Object(z.jsxs)(j.a,{children:[t?Object(z.jsxs)(d.a,{title:"Hello, "+t.knownAs.charAt(0).toUpperCase()+t.knownAs.slice(1),id:"name",children:[Object(z.jsx)(s.LinkContainer,{to:"/users/profile",children:Object(z.jsx)(d.a.Item,{children:"Profile"})}),Object(z.jsx)(d.a.Divider,{}),Object(z.jsx)(s.LinkContainer,{to:"/profile/edit",children:Object(z.jsx)(d.a.Item,{children:"Edit profile"})}),Object(z.jsx)(d.a.Divider,{}),Object(z.jsx)(d.a.Item,{onClick:function(){e((function(e){localStorage.removeItem("userInfo"),e({type:y}),e({type:P})}))},children:"Logout"})]}):Object(z.jsx)(s.LinkContainer,{to:"/login",children:Object(z.jsx)(j.a.Link,{children:"Login"})}),t&&t.isAdmin&&Object(z.jsx)(d.a,{title:"Admin ",id:"adminmenu",children:Object(z.jsx)(s.LinkContainer,{to:"/admin/users",children:Object(z.jsx)(d.a.Item,{children:"Users"})})})]})})})]})})})},Q=(n(136),n(46)),J=n(8),H=n(156),q=n(152),V=n(92),Y=n(28),K=n(29),X=n(99),Z=function(e){var t=e.chatMessage,n=e.own;return Object(z.jsx)(H.a,{className:n?"chatMessageOwn":"chatMessage",children:Object(z.jsxs)(H.a.Body,{children:[Object(z.jsx)(H.a.Title,{children:t.contents}),Object(z.jsx)(H.a.Footer,{children:Object(X.a)(t.date)})]})},t._id)},$=n(98),ee=function(e){var t=e.conversation,n=Object(a.useState)([]),r=Object(J.a)(n,2),c=r[0],s=r[1],o=Object(p.c)((function(e){return e.userLogin})).userInfo;return Object(a.useEffect)((function(){var e=t.participants.find((function(e){return e!==o._id})),n=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x()("/api/users/users/".concat(t));case 2:n=e.sent,s(n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();n(e)}),[o,t]),Object(z.jsx)(H.a,{style:{margin:"2% 0 2% 0"},children:Object(z.jsx)(H.a.Body,{children:Object(z.jsx)(H.a.Title,{children:c.username})})})},te=function(e){var t=e.history,n=Object(p.b)(),r=Object(a.useState)([]),c=Object(J.a)(r,2),s=c[0],o=c[1],j=Object(a.useState)(null),d=Object(J.a)(j,2),b=d[0],f=d[1],g=Object(a.useState)([]),v=Object(J.a)(g,2),m=v[0],y=v[1],S=Object(a.useState)(""),w=Object(J.a)(S,2),L=w[0],E=w[1],I=Object(a.useState)(null),C=Object(J.a)(I,2),_=C[0],k=C[1],T=Object(a.useRef)(),U=Object(a.useRef)(),R=Object(p.c)((function(e){return e.userLogin})).userInfo,A={headers:{Authorization:"Bearer ".concat(R.token)}};Object(a.useEffect)((function(){R?(T.current=Object($.a)("https://polylingua-app.herokuapp.com"),T.current.on("getMessage",(function(e){k({sender:e.sender,contents:e.contents,date:Date.now()})}))):t.push("/login")}),[R,t]),Object(a.useEffect)((function(){_&&(null===b||void 0===b?void 0:b.participants.includes(_.sender))&&y((function(e){return[].concat(Object(Q.a)(e),[_])}))}),[_,b]),Object(a.useEffect)((function(){R?(T.current.emit("addUser",R._id),T.current.on("getUsers",(function(e){console.log(e)}))):t.push("/login")}),[R,t]),Object(a.useEffect)((function(){if(R){var e=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("/api/conversations/".concat(t),A);case 3:n=e.sent,console.log(n.data),o(n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();e(R._id)}else t.push("/login")}),[R,t]),Object(a.useEffect)((function(){if(R){var e=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/messages/".concat(t),A);case 2:n=e.sent,a=n.data,y(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e(null===b||void 0===b?void 0:b._id)}else t.push("/login")}),[n,t,R,b]),Object(a.useEffect)((function(){var e;R?null===(e=U.current)||void 0===e||e.scrollIntoView({behavior:"auto"}):t.push("/login")}),[n,t,R,m]);var N=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={sender:R._id,contents:L,conversationId:b._id},console.log(n),a=b.participants.find((function(e){return e!==R._id})),T.current.emit("sendMessage",{sender:R._id,reciever:a,contents:L}),e.next=7,x.a.post("/api/messages",n,A);case 7:r=e.sent,y([].concat(Object(Q.a)(m),[r.data]));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsx)(z.Fragment,{children:Object(z.jsx)(i.a,{children:Object(z.jsx)(H.a,{children:Object(z.jsx)(H.a.Body,{children:Object(z.jsxs)(u.a,{children:[Object(z.jsx)(l.a,{md:4,style:{border:"solid #593196 3px",borderRadius:"2%",margin:"1%"},children:s.map((function(e){return Object(z.jsx)("div",{onClick:function(){f(e)},children:Object(z.jsx)(ee,{conversation:e})})}))}),Object(z.jsx)(l.a,{children:b?Object(z.jsxs)(l.a,{children:[Object(z.jsx)(l.a,{className:"chatBox",children:Object(z.jsx)(l.a,{md:8,className:"chatBoxWrapper",children:m.map((function(e){return Object(z.jsx)("div",{ref:U,children:Object(z.jsx)(Z,{chatMessage:e,own:e.sender===R._id,conversation:b})})}))})}),Object(z.jsxs)(l.a,{style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[Object(z.jsx)(q.a.Control,{onChange:function(e){return E(e.target.value)},value:L,className:"mx-2",as:"textarea",placeholder:"Write a message here"}),Object(z.jsx)(V.a,{onClick:N,type:"submit",variant:"primary",children:Object(z.jsx)(Y.a,{className:"mx-2",icon:K.a})})]})]}):Object(z.jsx)("p",{style:{fontSize:"25px"},children:"Choose a conversation to chat!"})})]})})})})})},ne=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(J.a)(n,2),c=r[0],s=r[1];return Object(z.jsxs)(q.a,{onSubmit:function(e){e.preventDefault(),c.trim()?t.push("/search/".concat(c)):t.push("/")},style:{display:"flex",justifyContent:"center",alignItems:"center"},className:"my-5",children:[Object(z.jsx)(q.a.Control,{type:"text",name:"q",onChange:function(e){return s(e.target.value)},placeholder:"Find a user by name, username, language user's learning, country or a city"}),Object(z.jsx)(V.a,{type:"submit",variant:"primary",children:Object(z.jsx)(Y.a,{className:"mx-2",icon:K.b})})]})},ae=n(12),re=function(e){var t=e.match,n=e.history,r=Object(a.useState)([]),c=Object(J.a)(r,2),o=c[0],j=c[1],d=Object(p.c)((function(e){return e.userLogin})).userInfo,b=t.params.keyword;return Object(a.useEffect)((function(){if(d){var e={headers:{Authorization:"Bearer ".concat(d.token)}},t=function(){var t=Object(O.a)(h.a.mark((function t(){var n,a,r,c=arguments;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:"",t.next=3,x.a.get("/api/users/users?keyword=".concat(n),e);case 3:a=t.sent,r=a.data,j(r),console.log(r);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t(b)}else n.push("/login")}),[b,n,d]),Object(z.jsxs)(i.a,{children:[Object(z.jsx)(u.a,{children:Object(z.jsx)(ae.d,{render:function(e){var t=e.history;return Object(z.jsx)(ne,{history:t})}})}),Object(z.jsx)(u.a,{style:{display:"flex",juctifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:o.map((function(e){return d&&e._id===d._id?Object(z.jsx)(z.Fragment,{}):Object(z.jsx)(l.a,{children:Object(z.jsx)(s.LinkContainer,{to:"users/".concat(e._id),style:{width:"30vh",margin:"2vh"},children:Object(z.jsx)(H.a,{children:Object(z.jsxs)(H.a.Body,{children:[Object(z.jsxs)(H.a.Title,{style:{marginBottom:"3vh"},children:[Object(z.jsx)(Y.a,{className:"mx-2",icon:K.c}),Object(z.jsx)("strong",{children:e.username})]}),Object(z.jsx)(H.a.Text,{children:e.knownAs.charAt(0).toUpperCase()+e.knownAs.slice(1)+", "+e.gender}),Object(z.jsx)(H.a.Text,{children:e.city+", "+e.country}),Object(z.jsxs)(H.a.Text,{style:{marginTop:"3vh"},children:["Native Language: ",Object(z.jsx)("strong",{children:e.nativeLanguage})]}),Object(z.jsxs)(H.a.Text,{children:["Learning: ",Object(z.jsx)("strong",{children:e.isLearning})]}),Object(z.jsx)(H.a.Text,{children:e.introduction}),Object(z.jsx)(V.a,{style:{marginTop:"2vh"},children:"Go to profile"})]})})},e._id)})}))})]})},ce=n(40),se=function(e){var t=e.children;return Object(z.jsx)(i.a,{children:Object(z.jsx)(u.a,{className:"justify-content-md-center",children:Object(z.jsx)(l.a,{xs:12,md:6,children:t})})})},oe=n(150),ie=function(){return Object(z.jsx)(oe.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(z.jsx)("span",{className:"sr-only"})})},ue=n(155),le=function(e){var t=e.variant,n=e.children;return Object(z.jsx)(ue.a,{variant:t,children:n})};le.defaultProps={variant:"info"};var je=le,de=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(J.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),j=Object(J.a)(i,2),d=j[0],b=j[1],f=Object(p.b)(),y=Object(p.c)((function(e){return e.userLogin})),S=y.userInfo,w=y.loading,L=y.error,E=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){S&&n.push(E)}),[n,S,E]);return Object(z.jsxs)(se,{children:[L&&Object(z.jsx)(je,{variant:"danger",children:L}),w&&Object(z.jsx)(ie,{}),Object(z.jsxs)(q.a,{onSubmit:function(e){e.preventDefault(),f(function(e,t){return function(){var n=Object(O.a)(h.a.mark((function n(a){var r,c,s;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:g}),r={headers:{"Content-Type":"application/json"}},n.next=5,x.a.post("/api/users/login",{username:e,password:t},r);case 5:c=n.sent,s=c.data,a({type:v,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:m,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(s,d))},style:{marginTop:"3vh",marginBottom:"3vh"},children:[Object(z.jsxs)(q.a.Group,{controlId:"username",children:[Object(z.jsx)(q.a.Label,{children:"Username"}),Object(z.jsx)(q.a.Control,{type:"",placeholder:"Enter your username",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"password",children:[Object(z.jsx)(q.a.Label,{children:"Password"}),Object(z.jsx)(q.a.Control,{type:"password",placeholder:"Enter your password",value:d,onChange:function(e){return b(e.target.value)},style:{marginBottom:"3vh"}})]}),Object(z.jsx)(V.a,{variant:"primary",type:"submit",children:"Sign in"}),Object(z.jsx)(V.a,{variant:"secondary",type:"submit",onClick:function(e){o("demo"),b("demodemo")},children:"Sign in as Demo User"})]}),Object(z.jsx)(u.a,{className:"py-3",children:Object(z.jsxs)(l.a,{children:["Don't have an account yet?",Object(z.jsx)(ce.Link,{to:E?"/register?redirect=".concat(E):"/register",children:" Register"})]})})]})},pe=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(J.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),j=Object(J.a)(i,2),d=j[0],b=j[1],f=Object(a.useState)(""),g=Object(J.a)(f,2),m=g[0],y=g[1],E=Object(a.useState)(null),I=Object(J.a)(E,2),C=I[0],_=I[1],k=Object(a.useState)(""),T=Object(J.a)(k,2),U=T[0],R=T[1],A=Object(a.useState)([]),N=Object(J.a)(A,2),D=N[0],B=N[1],P=Object(a.useState)(""),F=Object(J.a)(P,2),G=F[0],M=F[1],W=Object(a.useState)(""),Q=Object(J.a)(W,2),H=Q[0],Y=Q[1],K=Object(a.useState)([]),X=Object(J.a)(K,2),Z=X[0],$=X[1],ee=Object(a.useState)([]),te=Object(J.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(""),oe=Object(J.a)(re,2),ue=oe[0],le=oe[1],de=Object(a.useState)(""),pe=Object(J.a)(de,2),be=pe[0],he=pe[1],Oe=Object(a.useState)([]),fe=Object(J.a)(Oe,2),xe=fe[0],ge=fe[1],ve=Object(a.useState)(""),me=Object(J.a)(ve,2),ye=me[0],Se=me[1],we=Object(a.useState)(""),Le=Object(J.a)(we,2),Ee=Le[0],Ie=Le[1],Ce=Object(a.useState)(""),_e=Object(J.a)(Ce,2),ke=_e[0],Te=_e[1],Ue=Object(p.b)(),Re=Object(p.c)((function(e){return e.userRegister})),Ae=Re.userInfo,Ne=Re.loading,De=Re.error,Be=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){Ae&&n.push(Be);var e=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/languages");case 2:t=e.sent,n=t.data,B(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e();var t=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/countries");case 2:t=e.sent,n=t.data,$(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}),[n,Ae,Be]);var Pe=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=+new Date(t),a=(Date.now()-n)/315576e5,Te(a),console.log(ke),console.log(a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsxs)(se,{children:[C&&Object(z.jsx)(je,{variant:"danger",children:C}),De&&Object(z.jsx)(je,{variant:"danger",children:De}),Ne&&Object(z.jsx)(ie,{}),Object(z.jsxs)(q.a,{onSubmit:function(e){e.preventDefault(),Pe(G),d!==m?_("Passwords don't match"):be?xe?be===xe?_("Native language and the language you are learning can't be similar"):G?ke<13?_("You must be older than 13"):H?ye?Ee?ue?Ue(function(e,t,n,a,r,c,s,o,i,u){return function(){var l=Object(O.a)(h.a.mark((function l(j){var d,p,b;return h.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,j({type:S}),d={headers:{"Content-Type":"application/json"}},l.next=5,x.a.post("/api/users",{username:e,password:t,knownAs:n,nativeLanguage:a,isLearning:r,dateOfBirth:c,gender:s,country:o,city:i,introduction:u},d);case 5:p=l.sent,b=p.data,j({type:w,payload:b}),j({type:v,payload:b}),localStorage.setItem("userInfo",JSON.stringify(b)),l.next=15;break;case 12:l.prev=12,l.t0=l.catch(0),j({type:L,payload:l.t0.response&&l.t0.response.data.message?l.t0.response.data.message:l.t0.message});case 15:case"end":return l.stop()}}),l,null,[[0,12]])})));return function(e){return l.apply(this,arguments)}}()}(s,d,U,be,xe,G,H,ye,Ee,ue)):_("Enter your introduction please!"):_("Select your city please!"):_("Select your country please!"):_("Select your gender please!"):_("Choose your date of birth please!"):_("Select a language you are learning please!"):_("Select your native language please!")},style:{margin:"5vh"},children:[Object(z.jsxs)(q.a.Group,{controlId:"username",children:[Object(z.jsx)(q.a.Label,{children:"Username"}),Object(z.jsx)(q.a.Control,{type:"",placeholder:"Enter your username",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"password",children:[Object(z.jsx)(q.a.Label,{children:"Password"}),Object(z.jsx)(q.a.Control,{type:"password",placeholder:"Enter your password",value:d,onChange:function(e){return b(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"confirmPassword",children:[Object(z.jsx)(q.a.Label,{children:"Confirm Password"}),Object(z.jsx)(q.a.Control,{type:"password",placeholder:"Confirm your password",value:m,onChange:function(e){return y(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"knownAs",children:[Object(z.jsx)(q.a.Label,{children:"Name"}),Object(z.jsx)(q.a.Control,{type:"",placeholder:"Enter your name",value:U,onChange:function(e){return R(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"nativeLanguage",children:[Object(z.jsx)(q.a.Label,{children:"Native Language"}),Object(z.jsxs)(q.a.Control,{as:"select",type:"",value:be,onChange:function(e){return he(e.target.value)},children:[D.map((function(e){return Object(z.jsx)("option",{value:e.languageName,children:e.languageName},e._id)})),Object(z.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Select a language"})]})]}),Object(z.jsxs)(q.a.Group,{controlId:"isLearning",children:[Object(z.jsx)(q.a.Label,{children:"Language you want to learn"}),Object(z.jsxs)(q.a.Control,{as:"select",type:"",value:xe,onChange:function(e){return ge(e.target.value)},children:[D.map((function(e){return Object(z.jsx)("option",{value:e.languageName,children:e.languageName},e._id)})),Object(z.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Select a language"})]})]}),Object(z.jsxs)(q.a.Group,{controlId:"dateOfBirth",children:[Object(z.jsx)(q.a.Label,{children:"Date of birth"}),Object(z.jsx)(q.a.Control,{type:"date",value:G,onChange:function(e){return M(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"gender",children:[Object(z.jsx)(q.a.Label,{children:"Gender"}),Object(z.jsxs)(q.a.Control,{as:"select",type:"",value:H,onChange:function(e){return Y(e.target.value)},children:[Object(z.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Select your gender"}),Object(z.jsx)("option",{value:"Male",children:"Male"}),Object(z.jsx)("option",{value:"Female",children:"Female"}),Object(z.jsx)("option",{value:"Uknown",children:"Unknown"})]})]}),Object(z.jsxs)(q.a.Group,{controlId:"country",children:[Object(z.jsx)(q.a.Label,{children:"Country you are in"}),Object(z.jsxs)(q.a.Control,{as:"select",type:"",value:ye,onChange:function(e){Se(e.target.value);var t=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/cities/".concat(t));case 2:n=e.sent,a=n.data,ae(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t(e.target.value)},children:[Z.map((function(e,t){return Object(z.jsx)("option",{value:e.countryName,children:e.countryName},e._id)})),Object(z.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Select a country"})]})]}),Object(z.jsxs)(q.a.Group,{controlId:"city",children:[Object(z.jsx)(q.a.Label,{children:"City you are in"}),Object(z.jsxs)(q.a.Control,{as:"select",type:"",value:Ee,onChange:function(e){return Ie(e.target.value)},children:[ne.map((function(e,t){return Object(z.jsx)("option",{value:e.cityName,children:e.cityName},e._id)})),Object(z.jsx)("option",{value:"",selected:!0,disabled:!0,hidden:!0,children:"Select a city"})]})]}),Object(z.jsxs)(q.a.Group,{controlId:"introduction",children:[Object(z.jsx)(q.a.Label,{children:"Introduction"}),Object(z.jsx)(q.a.Control,{as:"textarea",style:{height:"100px"},value:ue,onChange:function(e){return le(e.target.value)}})]}),Object(z.jsx)(V.a,{style:{marginTop:"3vh"},variant:"primary",type:"submit",children:"Register"})]}),Object(z.jsx)(u.a,{className:"py-3",children:Object(z.jsxs)(l.a,{children:["Already have an account?",Object(z.jsx)(ce.Link,{to:Be?"/login?redirect=".concat(Be):"/login",children:" Login"})]})})]})},be=function(e){var t=e.history,n=Object(p.b)(),r=Object(a.useState)(""),c=Object(J.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)(""),u=Object(J.a)(i,2),j=u[0],d=u[1],b=Object(a.useState)(""),f=Object(J.a)(b,2),g=f[0],v=f[1],m=Object(a.useState)(null),S=Object(J.a)(m,2),w=S[0],L=S[1],N=Object(p.c)((function(e){return e.userDetails})),D=N.loading,B=N.error,P=N.user,F=Object(p.c)((function(e){return e.userLogin})).userInfo,G=Object(p.c)((function(e){return e.userUpdateProfile})).success,M=Object(p.c)((function(e){return e.userDeleteProfile})).success;Object(a.useEffect)((function(){var e;F?P.username?o(P.username):n((e="profile",function(){var t=Object(O.a)(h.a.mark((function t(n,a){var r,c,s,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:E}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.get("/api/users/users/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:I,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:C,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())):t.push("/login")}),[n,t,F,P,M]);return Object(z.jsxs)(se,{children:[w&&Object(z.jsx)(je,{variant:"danger",children:w}),B&&Object(z.jsx)(je,{variant:"danger",children:B}),G&&Object(z.jsx)(je,{variant:"success",children:"Profile successfully updated!"}),D&&Object(z.jsx)(ie,{}),Object(z.jsxs)(q.a,{onSubmit:function(e){e.preventDefault(),j!==g?L("Passwords don't match"):n(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n,a){var r,c,s,o,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:_}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.put("/api/users/users/profile",e,s);case 6:o=t.sent,i=o.data,n({type:k,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:T,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}({id:P._id,username:s,password:j}))},style:{marginTop:"3vh"},children:[Object(z.jsxs)(q.a.Group,{controlId:"username",children:[Object(z.jsx)(q.a.Label,{children:"Username"}),Object(z.jsx)(q.a.Control,{type:"",placeholder:"Enter your username",value:s,onChange:function(e){return o(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"password",children:[Object(z.jsx)(q.a.Label,{children:"Password"}),Object(z.jsx)(q.a.Control,{type:"password",placeholder:"Enter your password",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(z.jsxs)(q.a.Group,{controlId:"confirmPassword",children:[Object(z.jsx)(q.a.Label,{children:"Confirm Password"}),Object(z.jsx)(q.a.Control,{type:"password",placeholder:"Confirm your password",value:g,onChange:function(e){return v(e.target.value)}})]}),Object(z.jsxs)(l.a,{style:{marginTop:"3vh",display:"flex",justifyContent:"space-around",alignItems:"center",flexWrap:"norap"},children:[Object(z.jsx)(V.a,{variant:"primary",type:"submit",children:"Update profile"}),Object(z.jsx)(V.a,{onClick:function(e,t){window.confirm("Are you sure you want to delete your account?")&&n(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n,a){var r,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:U}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},localStorage.removeItem("userInfo"),n({type:y}),t.next=8,x.a.delete("/api/users/users/".concat(e),s);case 8:n({type:R}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:A,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(F._id))},variant:"danger",type:"submit",children:"Delete account"})]})]})]})},he=function(e){var t=e.match,n=e.history,r=Object(a.useState)({}),c=Object(J.a)(r,2),o=c[0],l=c[1],j=Object(p.c)((function(e){return e.userLogin})).userInfo,d=Object(a.useState)([]),b=Object(J.a)(d,2),f=b[0],g=b[1],v=Object(a.useState)(""),m=Object(J.a)(v,2),y=m[0],S=m[1],w=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=+new Date(t),a=(Date.now()-n)/315576e5,S(a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){if(j){var e={headers:{Authorization:"Bearer ".concat(j.token)}},t=function(){var t=Object(O.a)(h.a.mark((function t(n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("/api/conversations/".concat(n),e);case 2:a=t.sent,r=a.data,g(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();t(j._id)}else n.push("/login")}),[n,j]),Object(a.useEffect)((function(){if(j)if("profile"!==t.params.id){var e=function(){var e=Object(O.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/users/users/".concat(t.params.id));case 2:n=e.sent,l(n.data),w(n.data.dateOfBirth);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}else{var a=function(){var e=Object(O.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/users/users/".concat(j._id));case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();a(),w(j.dateOfBirth)}else n.push("/login")}),[n,j]);var L=function(){var e=Object(O.a)(h.a.mark((function e(a){var r,c,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=13;break}if(r={headers:{Authorization:"Bearer ".concat(j.token)}},c=!0,0!==f.length?f.map((function(e){console.log(f),console.log(e);var n=e.participants.find((function(e){return e!==j._id}));console.log(n),console.log(t.params.id),t.params.id===n&&(c=!1)})):c=!0,console.log(c),!0!==c){e.next=11;break}return s={sender:j._id,reciever:o._id},e.next=9,x.a.post("/api/conversations",s,r);case 9:i=e.sent,g([].concat(Object(Q.a)(f),[i.data]));case 11:e.next=14;break;case 13:n.push("/login");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsx)(i.a,{children:Object(z.jsx)(u.a,{style:{display:"flex",juctifyContent:"center",alignItems:"center",flexWrap:"wrap"},children:j&&j._id!==o._id?Object(z.jsx)(u.a,{children:Object(z.jsxs)(H.a,{style:{display:"flex",juctifyContent:"left",alignItems:"center",padding:"10vh"},children:[Object(z.jsxs)(H.a.Title,{style:{marginBottom:"5vh"},children:[Object(z.jsx)(Y.a,{className:"mx-2",icon:K.c}),Object(z.jsx)("strong",{children:o.username})]}),Object(z.jsx)(H.a.Text,{children:o.knownAs+", "+Math.floor(y)+", "+o.gender}),Object(z.jsx)(H.a.Text,{children:o.city+", "+o.country}),Object(z.jsxs)(H.a.Text,{style:{margin:"2vh"},children:["Native Language: ",Object(z.jsx)("strong",{children:o.nativeLanguage})]}),Object(z.jsxs)(H.a.Text,{children:["Learning: ",Object(z.jsx)("strong",{children:o.isLearning})]}),Object(z.jsx)(H.a.Text,{children:o.introduction}),Object(z.jsx)(s.LinkContainer,{to:"/messages",style:{width:"30%",marginTop:"2vh"},children:Object(z.jsxs)(V.a,{onClick:L,type:"submit",variant:"primary",children:[Object(z.jsx)(Y.a,{className:"mx-2",icon:K.a}),"Send a message"]})})]})}):Object(z.jsx)(u.a,{children:Object(z.jsxs)(H.a,{style:{display:"flex",juctifyContent:"left",alignItems:"center",padding:"10vh"},children:[Object(z.jsxs)(H.a.Title,{style:{marginBottom:"5vh"},children:[Object(z.jsx)(Y.a,{className:"mx-2",icon:K.c}),Object(z.jsx)("strong",{children:j.username})]}),Object(z.jsx)(H.a.Text,{children:j.knownAs+", "+Math.floor(y)+", "+j.gender}),Object(z.jsx)(H.a.Text,{children:j.city+", "+j.country}),Object(z.jsxs)(H.a.Text,{style:{margin:"2vh"},children:["Native Language: ",Object(z.jsx)("strong",{children:j.nativeLanguage})]}),Object(z.jsxs)(H.a.Text,{children:["Learning: ",Object(z.jsx)("strong",{children:j.isLearning})]}),Object(z.jsx)(H.a.Text,{style:{marginTop:"2vh"},children:j.introduction})]})})})})},Oe=function(e){var t=e.history,n=Object(p.b)(),r=Object(p.c)((function(e){return e.adminUserList})),c=r.loading,o=r.error,j=r.users,d=Object(p.c)((function(e){return e.userLogin})).userInfo,b=Object(p.c)((function(e){return e.adminUserDelete})).success;Object(a.useEffect)((function(){d&&d.isAdmin?n(function(){var e=Object(O.a)(h.a.mark((function e(t,n){var a,r,c,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:N}),a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,x.a.get("/api/admin/users",c);case 6:s=e.sent,o=s.data,t({type:D,payload:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:B,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()):t.push("/login")}),[n,t,b,d]);var f=function(e){window.confirm("Are you sure you want to delete this account?")&&n(function(e){return function(){var t=Object(O.a)(h.a.mark((function t(n,a){var r,c,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:F}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,x.a.delete("/api/admin/users/".concat(e),s);case 6:n({type:G}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n({type:M,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))};return Object(z.jsx)(z.Fragment,{children:c?Object(z.jsx)(ie,{}):o?Object(z.jsx)(je,{variant:"danger",children:o}):Object(z.jsx)(i.a,{children:Object(z.jsx)(u.a,{style:{display:"flex",juctifyContent:"center",alignItems:"center",flexWrap:"wrap",marginTop:"5vh"},children:j.map((function(e){return d&&e._id===d._id?Object(z.jsx)(z.Fragment,{}):Object(z.jsx)(l.a,{children:Object(z.jsx)(s.LinkContainer,{to:"users/".concat(e._id),style:{width:"30vh",margin:"2vh"},children:Object(z.jsx)(H.a,{children:Object(z.jsxs)(H.a.Body,{children:[Object(z.jsxs)(H.a.Title,{style:{marginBottom:"3vh"},children:[Object(z.jsx)(Y.a,{className:"mx-2",icon:K.c}),Object(z.jsx)("strong",{children:e.username})]}),Object(z.jsx)(H.a.Text,{children:e.knownAs.charAt(0).toUpperCase()+e.knownAs.slice(1)+", "+e.gender}),Object(z.jsx)(H.a.Text,{children:e.city+", "+e.country}),Object(z.jsxs)(H.a.Text,{style:{marginTop:"3vh"},children:["Native Language: ",Object(z.jsx)("strong",{children:e.nativeLanguage})]}),Object(z.jsxs)(H.a.Text,{children:["Learning: ",Object(z.jsx)("strong",{children:e.isLearning})]}),Object(z.jsx)(H.a.Text,{children:e.introduction}),Object(z.jsx)(V.a,{variant:"danger",style:{marginTop:"2vh"},onClick:function(){return f(e._id)},children:"Delete account"})]})})},e._id)})}))})})})},fe=function(e){var t=e.match,n=Object(a.useState)([]),r=Object(J.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(""),l=Object(J.a)(o,2),j=l[0],d=l[1],b=Object(a.useState)(""),f=Object(J.a)(b,2),g=f[0],v=f[1],m=Object(a.useState)(""),y=Object(J.a)(m,2),S=y[0],w=y[1],L=Object(p.c)((function(e){return e.userLogin})).userInfo,E={headers:{Authorization:"Bearer ".concat(L.token)}};Object(a.useEffect)((function(){var e=function(){var e=Object(O.a)(h.a.mark((function e(){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/blogs/".concat(t.params.id));case 2:n=e.sent,a=n.data,s(a),w(t.params.id);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var I=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n={title:j,contents:g,userId:L._id,sectionId:S},e.next=4,x.a.post("/api/blogs/".concat(S),n,E);case 4:e.sent,s(Object(Q.a)(c)),window.location.reload();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(z.jsx)(i.a,{style:{dispay:"flex",justifyContent:"center",alignItems:"center",width:"150vh"},children:Object(z.jsxs)(u.a,{children:[Object(z.jsx)("h1",{style:{marginTop:"3vh",marginBottom:"3vh"},children:L.isLearning}),Object(z.jsxs)(q.a,{onSubmit:I,children:[Object(z.jsx)(q.a.Control,{style:{marginBottom:"2vh"},type:"",placeholder:"Title",value:j,onChange:function(e){return d(e.target.value)}}),Object(z.jsx)(q.a.Control,{onChange:function(e){return v(e.target.value)},value:g,as:"textarea",style:{height:"100px"},placeholder:"Write a new post"}),Object(z.jsx)(V.a,{type:"submit",className:"my-4",variant:"primary",children:"Publish"})]}),Object(z.jsx)(H.a.Body,{children:c.map((function(e){return Object(z.jsx)(H.a,{style:{marginTop:"3vh",width:"100%"},children:Object(z.jsxs)(H.a.Body,{children:[Object(z.jsx)(H.a.Header,{style:{marginBottom:"2vh"},children:e.title}),Object(z.jsx)(H.a.Text,{children:e.contents})]})},e._id)}))})]})})};var xe=function(){return Object(z.jsxs)(ce.BrowserRouter,{children:[Object(z.jsx)(W,{}),Object(z.jsx)(ae.d,{path:"/messages",component:te,exact:!0}),Object(z.jsx)(ae.d,{path:"/blogs/:id",component:fe}),Object(z.jsx)(ae.d,{path:"/",component:re,exact:!0}),Object(z.jsx)(ae.d,{path:"/login",component:de,exact:!0}),Object(z.jsx)(ae.d,{path:"/register",component:pe,exact:!0}),Object(z.jsx)(ae.d,{path:"/profile",component:he,exact:!0}),Object(z.jsx)(ae.d,{path:"/profile/edit",component:be,exact:!0}),Object(z.jsx)(ae.d,{path:"/admin/users",component:Oe,exact:!0}),Object(z.jsx)(ae.d,{path:"/users/:id",component:he}),Object(z.jsx)(ae.d,{path:"/search/:keyword",component:re})]})},ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,157)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},ve=n(59),me=n(97),ye=n(96),Se=n(76),we=Object(ve.combineReducers)({userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return{loading:!0};case v:return{loading:!1,userInfo:t.payload};case m:return{loading:!1,error:t.payload};case y:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case w:return{loading:!1,userInfo:t.payload};case L:return{loading:!1,error:t.payload};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(Se.a)(Object(Se.a)({},e),{},{loading:!0});case I:return{loading:!1,user:t.payload};case C:return{loading:!1,error:t.payload};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return{loading:!0};case k:return{loading:!1,success:!0,userInfo:t.payload};case T:return{loading:!1,error:t.payload};default:return e}},userDeleteProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return{loading:!0};case R:return{loading:!1,success:!0};case A:return{loading:!1,error:t.payload};default:return e}},adminUserList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{loading:!0};case D:return{loading:!1,users:t.payload};case B:return{loading:!1,error:t.payload};case P:return{users:[]};default:return e}},adminUserDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return{loading:!0};case G:return{loading:!1,success:!0};case M:return{loading:!1,error:t.payload};default:return e}}}),Le={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Ee=[me.a],Ie=Object(ve.createStore)(we,Le,Object(ye.composeWithDevTools)(ve.applyMiddleware.apply(void 0,Ee)));c.a.render(Object(z.jsx)(p.a,{store:Ie,children:Object(z.jsx)(xe,{})}),document.getElementById("root")),ge()}},[[143,1,2]]]);
//# sourceMappingURL=main.91d37958.chunk.js.map